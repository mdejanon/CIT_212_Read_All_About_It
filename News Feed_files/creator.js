import"./plugins3.js";import{l as t,D as e,a as o,g as r}from"./d2l-practice.js";import{a}from"./feature-flags.js";import{i as n,Q as s,k as i}from"./lit-element.js";import{_ as c}from"./_rollupPluginBabelHelpers.js";import{E as l}from"./index5.js";import{g as d}from"./lazy-instantiator.js";import{t as u}from"./plugins.js";import"./colors.js";import"./icon.js";import"./typography.js";import"./localize-mixin.js";import"./common.js";import"./core.js";import"./index.js";import"./if-defined.js";import"./dedupeMixin.js";import"./icon-styles.js";import"./directive.js";import"./rtl-mixin.js";import"./unsafe-svg.js";import"./async-directive.js";import"./styles.js";const p=t.debug("error-handler");p("Loading error-handler module.");const f=new Map([]);const m=[{oldName:"--primary",newName:"--d2l-cplus-color-primary"},{oldName:"--primary-dark",newName:"--d2l-cplus-color-primary-dark"},{oldName:"--neutral-one-head",newName:"--d2l-cplus-color-neutral-one-head"},{oldName:"--font-family-one",newName:"--d2l-cplus-font-family-one"}];const y=t.debug("setup:accordions");function g(t,e){try{if(!t)return y("setupAccordion did not receive an accordion.");if(1!==t.nodeType)return y("the received accordion is not a DOM element.");const o=document.createElement("d2l-cplus-accordion"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const n=t.parentNode.querySelector(".instruction");o.dataset.instructions=n?n.textContent:"";const s=t.querySelectorAll(".card"),i=[];for(const[t,e]of s.entries()){const o={id:t},r=e.querySelector(".card-title");o.title=r&&r.textContent?r.textContent:"";const a=e.querySelector(".card-body");o.content=a&&a.innerHTML?a.innerHTML:"",i.push(o)}o.dataset.type=r.dataType,o.dataset.panels=JSON.stringify(i),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){y("setupAccordion failed to create an element.",t)}}y("Loading accordions module.");const b=t.debug("setup:callouts");function h(t,e){b("Starting setupCalloutComponent.");try{if(!t)return b("setupCalloutComponent did not receive a callout element.");if(1!==t.nodeType)return b("the received callout element is not a DOM element.");const o=document.createElement("d2l-cplus-callout"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("section"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=t.parentNode.getAttribute("data-type");const n=t.querySelector(".card-text > div, .jumbotron > div");o.dataset.content=JSON.stringify(n&&n.innerHTML?n.innerHTML:"");const s=t.querySelector(".card-text > h4, .jumbotron > h2");s.style.textTransform="none",o.dataset.title=s&&s.textContent?s.textContent:"",o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){b("setupCalloutComponent failed to create an element.",t)}}b("Loading callouts module.");const w=t.debug("setup:click-to-reveals");function x(t,e){w("Starting setupClickToRevealComponent.");try{if(!t)return w("setupClickToRevealComponent did not receive a click to reveal element.");if(1!==t.nodeType)return w("the received click to reveal element is not a DOM element.");const o=document.createElement("d2l-cplus-click-to-reveal"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("section"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=t.parentNode.getAttribute("data-type");const n=t.querySelector("button"),s=n?n.textContent:"";o.dataset.buttonRevealLabel=s.split("||").shift(),o.dataset.buttonHideLabel=s.split("||").pop();const i=t.querySelector(".card-text > p:first-of-type");o.dataset.introText=i?i.textContent:"";const c=t.querySelector(".card-text > p.instruction");o.dataset.instructions=c?c.textContent:"";const l=t.querySelector(".card-text > .collapse > div"),d=l&&l.innerHTML?l.innerHTML:"";o.dataset.revealedContent=JSON.stringify(d),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){w("setupClickToRevealComponent failed to create an element.",t)}}w("Loading click-to-reveals module.");const S=t.debug("setup:carousel");async function C(t,e){try{if(!t)return S("setupCarousel did not receive a carousel.");if(1!==t.nodeType)return S("the received carousel is not a DOM element.");const o=document.createElement("d2l-cplus-carousel"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyId=a?a.getAttribute("aria-describedby"):"",r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const n=t.parentNode.querySelector(".instruction");o.dataset.instruction=n?n.textContent:"",t.parentNode.querySelector(".instruction").innerHTML="";const s=t.querySelectorAll(".d2l-cplus-carousel-slide"),i=[];for(const[t,e]of s.entries()){const o={id:t},r=e.querySelector(".d2l-cplus-carousel-slide-title");o.title=r&&r.textContent?r.textContent:"";const a=e.querySelector(".d2l-cplus-carousel-slide-image");if(a){const t=a.getAttribute("src"),e=a.getAttribute("alt");if(!t)return S("Could not find src attribute on image tag.");if("string"!=typeof t)return S("Value of src attribute was not a string.");o.image=t,o.alt=e||""}else o.image="",o.alt="";const n=e.querySelector(".d2l-cplus-carousel-slide-text");o.text=n&&n.innerHTML?n.innerHTML:"",i.push(o)}o.dataset.slides=JSON.stringify(i),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){S("setupCarousel failed to create an element.",t)}}S("Loading carousel module.");const A=t.debug("setup:flipcards");function v(t,e){A("Starting setupFlipcardsComponent.");try{if(!t)return A("setupFlipcardsComponent did not receive a flipcards element.");if(1!==t.nodeType)return A("the received flipcards element is not a DOM element.");const o=document.createElement("d2l-cplus-flipcards"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("section"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e;const n=t.parentNode.querySelector(".instruction");o.dataset.instructions=n?n.textContent:"",o.dataset.maxcards=t.getAttribute("data-maxcards");const s=t.querySelectorAll(".d2l-flip-card"),i=[];for(const t of s){const e=t.style.gridRowStart-1,o={},r=t.querySelector(".d2l-flip-card-front-body h2");o.frontTitle=r?r.textContent.trim():"";const a=t.querySelector(".d2l-flip-card-front-body p");o.frontText=a?a.textContent.trim():"";const n=t.querySelector(".d2l-flip-card-front img");o.frontImage={url:n?n.getAttribute("src"):"",alt:n?n.getAttribute("alt"):""};const s=t.querySelector(".d2l-flip-card-back-body h2");o.backTitle=s?s.textContent.trim():"";const c=t.querySelector(".d2l-flip-card-back-body p");o.backText=c?c.textContent.trim():"";const l=t.querySelector(".d2l-flip-card-back img");o.backImage={url:l?l.getAttribute("src"):"",alt:l?l.getAttribute("alt"):""},i[e]||(i[e]=[]),i[e]=[...i[e],o]}o.dataset.rows=JSON.stringify(i),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){A("setupFlipcardsComponent failed to create an element.",t)}}A("Loading flipcards module.");const N=t.debug("lang-terms");async function L(t){if(!t)return N("Language code not found.");if("string"!=typeof t)return N("Language code is not a string.");const e=["ar","cy","da","de","en","es-es","es","fr-fr","fr-on","fr","hi-in","ja","ko","nl","pt","sv","tr","zh-cn","zh-tw"];let o="";o=e.indexOf(t)>-1?t:e.indexOf(t.split("-")[0])>-1?t.split("-")[0]:"en";try{return(await function(t){switch(t){case"../../../../lang/ar.js":return import("./ar7.js");case"../../../../lang/cy.js":return import("./cy7.js");case"../../../../lang/da.js":return import("./da7.js");case"../../../../lang/de.js":return import("./de7.js");case"../../../../lang/en-gb.js":return import("./en-gb6.js");case"../../../../lang/en.js":return import("./en7.js");case"../../../../lang/es-es.js":return import("./es-es6.js");case"../../../../lang/es.js":return import("./es7.js");case"../../../../lang/fr-fr.js":return import("./fr-fr6.js");case"../../../../lang/fr-on.js":return import("./fr-on6.js");case"../../../../lang/fr.js":return import("./fr7.js");case"../../../../lang/hi.js":return import("./hi7.js");case"../../../../lang/ja.js":return import("./ja7.js");case"../../../../lang/ko.js":return import("./ko7.js");case"../../../../lang/nl.js":return import("./nl7.js");case"../../../../lang/pt.js":return import("./pt7.js");case"../../../../lang/sv.js":return import("./sv7.js");case"../../../../lang/tr.js":return import("./tr7.js");case"../../../../lang/zh-cn.js":return import("./zh-cn6.js");case"../../../../lang/zh-tw.js":return import("./zh-tw7.js");default:return new Promise((function(e,o){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t)))}))}}(`../../../../lang/${o}.js`)).default}catch(t){return N("getLangTerms failed unexpectedly.",t)}}N("Loading lang-terms module.");const j=t.debug("image-conversion");async function T(t){if(!t)return j("Url for image not found.");if("string"!=typeof t)return j("Url for image is not a string");try{const e=await fetch(t);if(!e.ok)return j("Failed to get image.");const o=await e.blob();if(!(o instanceof Blob))return j("Not a blob.");const r=await function(t){const e=new FileReader;return new Promise(((o,r)=>{e.onerror=()=>{r(null)},e.onload=()=>{o(e.result)},e.readAsDataURL(t)}))}(o);return"string"!=typeof r?j("Image blob could not be read."):r}catch(t){return j("imageToBase64 failed unexpectedly.",t)}}j("Loading image-conversion module.");const q=t.debug("setup:hotspots");q("Loading hotspots module.");const D=t.debug("module");function O(t,e){D("Starting processStylizedQuoteComponent.");try{if(!t)return D("setupStylizedQuoteComponent did not receive a stylized quote element.");if(1!==t.nodeType)return D("the received stylized quote element is not a DOM element.");const o=document.createElement("d2l-cplus-stylized-quote"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("section"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=t.parentNode.getAttribute("data-type");const n=t.querySelector("blockquote > p");o.dataset.quotation=n&&n.textContent?n.textContent:"";const s=t.querySelector("blockquote > footer");o.dataset.attribution=s&&s.textContent?s.textContent:"",o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){D("setupStylizedQuoteComponent failed to create an element.",t)}}D("Loading quotes module.");const k=t.debug("setup:tabs");async function I(t,e){try{if(!t)return k("setupTabsWrapper did not receive a tabsWrapper.");if(1!==t.nodeType)return k("the received tabsWrapper is not a DOM element.");const o=document.createElement("d2l-cplus-tabs-container"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby"),o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const a=t.parentNode.querySelector(".instruction");o.dataset.instruction=a?a.textContent:"",t.parentNode.querySelector(".instruction").innerHTML="";const n=t.querySelectorAll(".list-group-item"),s=t.querySelectorAll(".tab-pane"),i=[];for(let t=0;t<n.length;t++){const o={id:e};let r=n[t].querySelectorAll('span[data-itemprop$="0"]')[0];if(!r&&n[t].hasAttribute("data-itemprop")){const e=n[t].getAttribute("data-itemprop");"0"===e.substr(e.length-1)&&(r=n[t])}o.title=r&&r.textContent?r.textContent:"";const a=n[t].querySelectorAll("img")[0];o.imageSrc=a&&a.getAttribute("src")?a.getAttribute("src"):"",o.imageAlt=a&&a.getAttribute("alt")?a.getAttribute("alt"):"",o.content=s[t]&&s[t].innerHTML&&""!==s[t].innerHTML.replace(/(<p[^>]+?>|<p>|<\/p>)/gi,"").trim()?s[t].innerHTML:"",i.push(o)}o.dataset.type=r.dataType,o.dataset.tabsData=JSON.stringify(i),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){k("setupTabsWrapper failed to create an element.",t)}}k("Loading tabs module.");const M=t.debug("setup:timelines");async function F(t,e){try{if(!t)return M("setupTimeline did not receive a timeline.");if(1!==t.nodeType)return M("the received timeline is not a DOM element.");const o=document.createElement("d2l-cplus-timeline"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby"),o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const a=t.querySelectorAll(".timeline-panel"),n=[];for(const[t,e]of a.entries()){const o={id:t},r=e.querySelector(".timeline-heading");o.title=r&&r.textContent?r.textContent:"";const a=e.querySelector(".timeline-body > [data-itemprop]");o.content=a&&a.innerHTML&&""!==a.innerHTML.replace(/(<p[^>]+?>|<p>|<\/p>)/gi,"").trim()?a.innerHTML:"",n.push(o)}o.dataset.type=r.dataType,o.dataset.panels=JSON.stringify(n),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){M("setupTimeline failed to create an element.",t)}}M("Loading timelines module.");const B=t.debug("elements");B("Loading elements module."),function(){const t=new FontFace("Lato","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-400.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-400.woff) format(woff)",{style:"normal",weight:"400"});document.fonts.add(t),t.load();const e=new FontFace("Lato","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-700.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-700.woff) format(woff)",{style:"normal",weight:"700"});document.fonts.add(e),e.load();const o=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Light.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Light.woff) format(woff)",{style:"normal",weight:"300"});document.fonts.add(o),o.load();const r=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Regular.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Regular.woff) format(woff)",{style:"normal",weight:"400"});document.fonts.add(r),r.load();const a=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Bold.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Bold.woff) format(woff)",{style:"normal",weight:"700"});document.fonts.add(a),a.load();const n=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-LightItalic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-LightItalic.woff) format(woff)",{style:"italic",weight:"300"});document.fonts.add(n),n.load();const s=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Italic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Italic.woff) format(woff)",{style:"italic",weight:"400"});document.fonts.add(s),s.load();const i=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-BoldItalic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-BoldItalic.woff) format(woff)",{style:"italic",weight:"700"});document.fonts.add(i),i.load()}();let z;const H=n(z||(z=(t=>t)`.d2l-cplus-layout{container-name:d2l-cplus-layout;container-type:inline-size;display:grid;grid-template-rows:auto;margin-block:0;margin-inline:calc(var(--d2l-cplus-size-base, 18px)*-1);min-height:30px;width:calc(100% + 2*var(--d2l-cplus-size-base, 18px))}.d2l-cplus-layout::after{clear:both;content:" ";display:block;height:0;visibility:hidden}.d2l-cplus-layout-column{padding-block:0;padding-inline:var(--d2l-cplus-size-base, 18px);word-wrap:break-word}@container d2l-cplus-layout (width <= 822px){.d2l-cplus-layout-column{padding-inline:var(--d2l-cplus-size-small-1, 12px)}.d2l-cplus-layout-column:first-of-type{padding-inline-start:var(--d2l-cplus-size-base, 18px)}.d2l-cplus-layout-column:last-of-type{padding-inline-end:var(--d2l-cplus-size-base, 18px)}}@container d2l-cplus-layout (width <= 546px){.d2l-cplus-layout-column{grid-column:1/-1;padding-inline:var(--d2l-cplus-size-base, 18px)}}.d2l-cplus-layout-half{grid-template-columns:repeat(2, 50%)}.d2l-cplus-layout-thirds{grid-template-columns:repeat(3, minmax(33%, 1fr))}.d2l-cplus-layout-one-third{grid-template-columns:minmax(33%, 1fr) minmax(66%, 1fr)}.d2l-cplus-layout-two-third{grid-template-columns:minmax(66%, 2fr) minmax(33%, 1fr)}.d2l-cplus-layout iframe{max-width:100%}
`)),E=t.debug("setup:layouts");async function P(t){E("Starting setupLayouts.");try{if(!t||t.length<1)return E("setupLayouts found no layouts.");for(const e of t)e.style.opacity=0;!function(){try{E("Stating addStyles.");const t=document.createElement("style");t.innerHTML=H.cssText,document.head.appendChild(t)}catch(t){E("addStyle failed unexpectedly.")}}()}catch(t){E("setupLayouts failed unexpectedly",t)}finally{for(const e of t)e.style.opacity=1}}E("Loading layouts module.");const J=t.debug("layouts");J("Loading layouts module.");const U=async function(t,e,o){const r={headers:{Authorization:`Bearer ${e}`}};try{const e=t.getLinkByRel("https://activity.api.brightspace.com/rels/assigned-activities");if(!e)return{};const n=new l(await(await fetch(e.href,r)).json()),s=n.getActionByName("create-assigned-activity");if(n.entities||(o=!0),s&&o){var a;const t={};s.fields.forEach((e=>{e.value&&(t[e.name]=e.value)}));const o=(await fetch(s.href,c({method:s.method,body:new URLSearchParams(t),headers:{"Content-Type":null!==(a=s.type)&&void 0!==a?a:"application/x-www-form-urlencoded;charset=UTF-8"}},r))).headers.get("Content-Location");return{attempt:new l(await(await fetch(o,r)).json()),assignedActivitiesList:e}}if(n.entities&&n.entities.length>0){return{attempt:new l(await(await fetch(n.entities[0].href,r)).json()),assignedActivitiesList:e}}}catch(t){return{}}};let R,$,Q=t=>t;customElements.define("d2l-practice-error",class extends e{static get styles(){return n(R||(R=Q`
		:host {
			all: initial;
			color: #494c4e;
			display: inline-block;
			font-family: "Lato", sans-serif;
			font-size: 0.8rem;
			line-height: 1.5;
			overflow: hidden;
			width: 100%;
		}

		:host([hidden]) {
			display: none;
		}

		.d2l-error-contain {
			align-items: center;
			background-color: var(--d2l-color-celestine-plus-2);
			border: 1px solid var(--d2l-color-mica);
			border-radius: 6px;
			display: flex;
			flex-direction: column;
			justify-content: center;
			overflow: hidden;
			padding: 18px;
		}

		d2l-icon {
			margin-top: 0.83em;
		}`))}render(){return i($||($=Q`
			<div class="d2l-error-contain">
				<d2l-icon icon="tier3:alert"></d2l-icon>
				<h2>${0}</h2>
			</div>
		`),this.localize("practice:learner:general:errorLoadingPractice"))}});const W=t.debug("practices");W("Loading practices.js"),window.D2L=window.D2L||{},window.D2L.Creator={convertElements:function(t,e,o,r="False"){B("Starting convertElements",r),!JSON.parse(r.toLowerCase())||!t||t.length<1||(document.querySelector("html").setAttribute("data-mathjax-context",JSON.stringify({outputScale:1.5})),window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:e,OrgUnitPath:o},window.D2L.Creator.Flags=window.D2L.Creator.Flags||{},window.D2L.Creator.Flags.Elements=function(){let t;try{return t=a(f),t}catch(t){return f}}(),p("Registering error handler."),window.addEventListener("error",(t=>{p(`CPlusError: ${t.type}: ${t.message}`),t.stopPropagation(),t.preventDefault()})),function(){for(const t of m){const e=getComputedStyle(document.documentElement).getPropertyValue(t.oldName);e&&document.documentElement.style.setProperty(t.newName,e)}}(),async function(){k("Starting setupTabs.");const t=document.querySelectorAll(".d2l-element > .tabs-wrapper");if(!t||t.length<1)return k("setupTabs found no tabs.");try{for(const e of t)e.parentNode.style.opacity=0;await import("./tabs2.js");for(const[e,o]of t.entries())I(o,e)}catch(t){k("setupTabs failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-element:not(.d2l-tabccordion) > .accordion");if(!t||t.length<1)return y("setupAccordions found no accordions.");for(const e of t)e.parentNode.style.opacity=0;await import("./accordion2.js");for(const[e,o]of t.entries())g(o,e)}catch(t){y("setupAccordions failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-element > .card.card-reveal");if(!t||t.length<1)return w("setupCardReveals found no click to reveals");for(const e of t)e.parentNode.style.opacity=0;await import("./click-to-reveal.js");for(const[e,o]of t.entries())x(o,e)}catch(t){w("setupCardReveals failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-flip-card-wrapper");if(!t||t.length<1)return A("setupFlipcards found no flipcards");for(const e of t)e.parentNode.style.opacity=0;await import("./flipcards.js");for(const[e,o]of t.entries())v(o,e)}catch(t){A("setupFlipcards failed unexpectedly",t)}}(),async function(){const t=document.querySelectorAll(".d2l-element > .card:not(.card-reveal), .d2l-element > .jumbotron");try{if(!t||t.length<1)return b("setupCallouts found no callouts");for(const e of t)e.parentNode.style.opacity=0;await import("./callout.js");for(const[e,o]of t.entries())h(o,e)}catch(t){b("setupCallouts failed unexpectedly",t)}finally{for(const e of t)e.parentNode.style.opacity=1}}(),async function(){M("Starting setupTimelines.");const t=document.querySelectorAll(".d2l-element .timeline");if(!t||t.length<1)return M("setupTimelines found no timelines.");try{for(const e of t)e.parentNode.parentNode.style.opacity=0;await import("./timeline.js");for(const[e,o]of t.entries())F(o,e)}catch(t){M("setupTimelines failed unexpectedly",t)}finally{const t=document.querySelectorAll("d2l-cplus-timeline");for(const e of t)e.parentNode.style.opacity=1}}(),async function(){q("Starting setupHotspots.");const t=document.querySelectorAll(".d2l-hotspot");try{const e=document.querySelector("html").hasAttribute("lang")?document.querySelector("html").getAttribute("lang"):"en-us",o=await L(e);if(o||q("Unable to get language terms."),"object"!=typeof o&&q("Unexpected value for langTerms object."),!t||t.length<1)return q("setupHotspots found no containers.");for(const e of t)e.parentNode.style.opacity=0;await import("./hotspot.js");for(const e of t)try{if(!e.getAttribute("data-properties"))return q("Could not find necessary data for the interactive.");const t={},r=e.closest(".d2l-element");t.dataIdx=r.getAttribute("data-idx"),t.dataType=r.getAttribute("data-type"),t.role=r.getAttribute("section"),t.ariaDescribedby=r.getAttribute("aria-describedby");const a=r.querySelector(".sr-only");t.srOnlyId=a?a.getAttribute("id"):"",t.srOnlyInnerText=a?a.textContent:"";const n=e.querySelector("img");if(!n)return q("Could not find required image tag.");const s=n.getAttribute("src");if(!s)return q("Could not find src attribute on image tag.");if("string"!=typeof s)return q("Value of src attribute was not a string.");const i=await T(s);if(!i)return q("Image could not be converted to Base64");let c;try{c=decodeURIComponent(window.atob(e.getAttribute("data-properties")))}catch(t){q("setupHotspots failed to decode string.",t),c=window.atob(e.getAttribute("data-properties"))}if("string"!=typeof c)return q("Value of data-properties attribute was not a string.");const l=document.createElement("d2l-cplus-hotspot");l.dataset.activity=c,l.dataset.image=i,l.dataset.langTerms=JSON.stringify(o),l.dataset.wrapper=JSON.stringify(t),l.setAttribute("data-rs-shadow-root",!0),e.parentNode.after(l),e.parentNode.remove()}catch(t){q("setupHotspots failed to create an element.",t)}}catch(t){q("setupHotspots failed unexpectedly",t)}finally{for(const e of t)e.parentNode.style.opacity=1}}(),async function(){try{const t=document.querySelectorAll(".d2l-cplus-carousel");if(!t||t.length<1)return S("setupCarousels found no carousels.");for(const e of t)e.parentNode.parentNode.style.opacity=0;await import("./carousel.js");for(const[e,o]of t.entries())C(o,e)}catch(t){S("setupCarousels failed unexpectedly",t)}finally{const t=document.querySelectorAll("d2l-cplus-carousel");for(const e of t)e.parentNode.style.opacity=1}}(),async function(){const t=document.querySelectorAll(".d2l-element > .blockquote");try{if(!t||t.length<1)return D("setupStylizedQuotes found no stylized quotes");for(const e of t)e.parentNode.style.opacity=0;await import("./stylized-quote.js");for(const[e,o]of t.entries())O(o,e)}catch(t){D("setupStylizedQuotes failed unexpectedly",t)}}())},convertLayouts:function(t){J("Starting convertLayouts"),P(t)},convertPractices:async function(t,e,a){if(W("Starting convertPractices."),!t||t.length<1)return;window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:e,OrgUnitPath:a};const n=[];for(let e=0;e<t.length;e++){const o=t[e].querySelector("iframe[data-file]");if(o){const t=o.src||o.getAttribute("data-src"),e=new URLSearchParams(t).get("t");if(e){if(o.setAttribute("data-type",e),n.includes(e))continue;n.push(parseInt(e))}o.setAttribute("data-src",o.src),o.removeAttribute("src"),o.style.height=0}}for(const t of n){const e=document.querySelectorAll(`.d2l-practice iframe[data-type="${t}"]`);if(await o(t))for(const o of e){let e=o.getAttribute("data-file");if(e){e.includes("practice/")||(e=`practice/${e}`);try{const a=await fetch(`${window.D2L.Creator.Context.OrgUnitPath}${e}`).then((t=>t.json())),n=r(t),s=document.createElement(n);o.parentNode.appendChild(s),s.practiceData=a,s.setAttribute("data-rs-shadow-root",!0),o.remove()}catch(a){try{const a=await fetch(`${e}`).then((t=>t.json())),n=r(t),s=document.createElement(n);o.parentNode.appendChild(s),s.practiceData=a,s.setAttribute("data-rs-shadow-root",!0),s.setAttribute("practice-lor",""),o.remove()}catch(t){const e=document.createElement("d2l-practice-error");o.replaceWith(e)}}}}else for(const t of e)t.setAttribute("src",t.getAttribute("data-src")),t.removeAttribute("data-src"),t.style.height="auto"}},convertPracticeActivities:async function(e,o,r,a=!1){const n=t.debug("practices-activities");if(n("Starting convertPracticeActivities."),!e||e.length<1)return;n(`convertPracticeActivities is converting ${e.length} Practice(s).`),e.forEach((t=>{const e=t.querySelector("iframe[data-file]");e&&(e.setAttribute("data-src",e.src),e.removeAttribute("src"),e.style.height=0)}));const i=u("practices-activity-display","registry");let c;i&&await i.getModule();const p=u("practices-activity-display","provider-framework-utils");let f;p&&(c=await p.getModule()),window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:o,OrgUnitPath:r};let m=!1;for(const t of e){const e=t.attributes["data-d2l-activity-href"].value,o=t.innerHTML,r=t.querySelector("iframe[data-file]");r&&r.remove();try{const r=`${e.split("?").shift()}?ou=${window.D2L.Creator.Context.OrgUnitId}`,n=l(await(await window.top.d2lfetch.fetch(`${r}`)).json());void 0===f&&(f=localStorage["D2L.Fetch.Tokens"]&&JSON.parse(localStorage["D2L.Fetch.Tokens"])["*:*:*"]&&JSON.parse(localStorage["D2L.Fetch.Tokens"])["*:*:*"].access_token||void 0);let i=n;const u=await d(n,f,window.D2L.Creator.Context.OrgUnitId);if(u){const t=await U(u,f,a);i=t&&t.attempt||i}const p=await c(i.links,{type:"practice-activity",token:f});if(void 0===p)m=!0,t.innerHTML=o;else{var y;const e=p&&(null!==(y=p.contentDoing)&&void 0!==y?y:p.contentPrimary)||null;e?s(e,t):(m=!0,t.innerHTML=o)}}catch(e){m=!0,t.innerHTML=o}}if(m){const t=document.querySelectorAll(".d2l-practice");window.D2L.Creator.convertPractices(t,o,r)}},wrapTables:function(t){if(t&&!(t.length<1))for(const e of t){const t=document.createElement("div"),o=e.parentNode;o.classList.contains("table-responsive")||(t.classList.add("table-wrapper"),o.insertBefore(t,e),t.appendChild(e))}}};export{L as g};
